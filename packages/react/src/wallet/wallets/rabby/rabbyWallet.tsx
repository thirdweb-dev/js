import type { WalletOptions, WalletConfig } from "@thirdweb-dev/react-core";
import { RabbyWallet, getInjectedRabbyProvider } from "@thirdweb-dev/wallets";
import { RabbyConnectUI } from "./RabbyConnectUI";

type RabbyWalletOptions = {
  /**
   * When connecting Rabby using the QR Code - Wallet Connect connector is used which requires a project id.
   * This project id is Your projectâ€™s unique identifier for wallet connect that can be obtained at cloud.walletconnect.com.
   *
   * https://docs.walletconnect.com/2.0/web3modal/options#projectid-required
   */
  projectId?: string;

  /**
   * If true, the wallet will be tagged as "reccomended" in ConnectWallet Modal
   */
  recommended?: boolean;
};

export const rabbyWallet = (
  options?: RabbyWalletOptions,
): WalletConfig<RabbyWallet> => {
  return {
    id: RabbyWallet.id,
    recommended: options?.recommended,
    meta: {
      name: "Rabby Wallet",
      urls: {
        chrome:
          "https://chrome.google.com/webstore/detail/rabby-wallet/acmacodkjbdgmoleebolmdjonilkdbch",
      },
      iconURL:
        "data:image/jpeg;base64,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",
    },
    create: (walletOptions: WalletOptions) => {
      const wallet = new RabbyWallet({
        ...walletOptions,
        projectId: options?.projectId,
        qrcode: false,
      });

      return wallet;
    },
    connectUI: RabbyConnectUI,
    isInstalled() {
      return !!getInjectedRabbyProvider();
    },
  };
};
