!function(){const e=function e(){const t=document.currentScript;if(!t)throw Error("Could not find script element");const s=new URL(t.src).origin,n=t.dataset,r=n.clientId;if(!r)throw Error("Missing client-id");return{clientId:r,baseUrl:s}}(),t="tw.login:userAddress",s="tw.login:sessionKeyAddress",n="tw.login:code";function r(){const t=window.crypto.getRandomValues(new Uint8Array(4)).join("");localStorage.setItem(n,t);const s=new URL(e.baseUrl);s.searchParams.set("code",t),s.searchParams.set("clientId",e.clientId),s.searchParams.set("redirect",window.location.href),window.location.href=s.href}!function e(){const o=function e(t){if(!t.hash)return null;try{return function e(t){const s=t.startsWith("#")?t.slice(1):t,n=atob(s),r=JSON.parse(n);return"userAddress"in r&&"sessionKeyAddress"in r&&"code"in r?r:null}(t.hash)}catch{return null}}(new URL(window.location));o&&o.code===localStorage.getItem(n)&&(window.location.hash="",localStorage.setItem(n,o.code),localStorage.setItem(t,o.userAddress),localStorage.setItem(s,o.sessionKeyAddress));const i=localStorage.getItem(t),l=localStorage.getItem(s);i&&l?(console.log("handleIsLoggedIn"),window.thirdweb={isLoggedIn:!0,getAddress:()=>localStorage.getItem(t),logout(){window.localStorage.removeItem(t),window.localStorage.removeItem(s),window.location.reload()}}):window.thirdweb={login:r,isLoggedIn:!1}}()}();