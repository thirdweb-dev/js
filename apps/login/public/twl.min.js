(()=>{const e=(()=> {const e=document.currentScript;if(!e)throw new Error("Could not find script element");const o=new URL(e.src).origin,t=e.dataset.clientId;if(!t)throw new Error("Missing client-id");return{clientId:t,baseUrl:o}})(),o="tw.login:userAddress",t="tw.login:sessionKeyAddress",n="tw.login:code";function r(){const o=window.crypto.getRandomValues(new Uint8Array(4)).join("");localStorage.setItem(n,o);const t=new URL(e.baseUrl);t.searchParams.set("code",o),t.searchParams.set("clientId",e.clientId),t.searchParams.set("redirect",window.location.href),window.location.href=t.href}!(()=> {const e=funci(f(=> !e.hash)return null;try{return functiont( o=> =e.startsWith("#")?e.slice(1):e,t=atob(o),n=JSON.parse(t);if("userAddress"in n&&"sessionKeyAddress"in n&&"code"in n)return n;return null}(e.hash))}catch{return null}}(new) URL(window.location));e&&e.code===localStorage.getItem(n)&&(window.location.hash="",localStorage.setItem(n,e.code),localStorage.setItem(o,e.userAddress),localStorage.setItem(t,e.sessionKeyAddress));const s=localStorage.getItem(o),i=localStorage.getItem(t);s&&i?(console.log("handleIsLoggedIn"),window.thirdweb={isLoggedIn:!0,getAddress:()=>localStorage.getItem(o),logout:()=>{window.localStorage.removeItem(o),window.localStorage.removeItem(t),window.location.reload()}}):window.thirdweb={login:r,isLoggedIn:!1}})()})();